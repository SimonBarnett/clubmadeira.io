{% extends "base.inc" %}
{% block content %}
<div class="main-container">
    <div class="menu-container">
        <div class="menu">
            <button data-section="deal_listings">
                <span class="button-content"><i class="fas fa-tags"></i> Deal Listings</span>
            </button>
            <button data-submenu="affiliatePrograms" data-section="affiliateProgramsIntro">
                <span class="button-content"><i class="fas fa-handshake"></i> Affiliate Programs</span>
                <i class="fas fa-caret-right caret"></i>
            </button>
            <div id="affiliatePrograms" class="submenu">
                <button data-section="amazon_uk">
                    <span class="button-content">
                        <span class="icon-amazon-uk menu-size"></span> Amazon UK
                    </span>
                </button>
                <button data-section="ebay_uk">
                    <span class="button-content">
                        <span class="icon-ebay-uk menu-size"></span> eBay UK
                    </span>
                </button>
                <button data-section="awin">
                    <span class="button-content"><i class="fas fa-network-wired"></i> Awin</span>
                </button>
                <button data-section="cj">
                    <span class="button-content"><i class="fas fa-link"></i> CJ</span>
                </button>
                <button data-section="textmagic">
                    <span class="button-content"><i class="fas fa-sms"></i> TextMagic</span>
                </button>
                <button data-section="tiny">
                    <span class="button-content"><i class="fas fa-pen"></i> tiny</span>
                </button>
            </div>
            <button data-submenu="userManagement" data-section="userManagementIntro">
                <span class="button-content"><i class="fas fa-users"></i> User Management</span>
                <i class="fas fa-caret-right caret"></i>
            </button>
            <div id="userManagement" class="submenu">
                <button data-section="partners">
                    <span class="button-content">
                        <span class="menu-size icon-partner"></span> Partners
                    </span>
                </button>
                <button data-section="communities">
                    <span class="button-content">
                        <span class="menu-size icon-community"></span> Communities
                    </span>
                </button>
                <button data-section="merchants">
                    <span class="button-content">
                        <span class="menu-size icon-merchant"></span> Merchants
                    </span>
                </button>
            </div>
            <button data-submenu="testScripts" data-section="testScriptsIntro">
                <span class="button-content"><i class="fas fa-flask"></i> Test Scripts</span>
                <i class="fas fa-caret-right caret"></i>
            </button>
            <div id="testScripts" class="submenu">
                <button data-href="/partner">
                    <span class="button-content">
                        <span class="icon-group">
                            <span class="menu-size icon-partner"></span>
                            <i class="fas fa-flask small-icon"></i>
                        </span> Partner
                    </span>
                </button>
                <button data-href="/community">
                    <span class="button-content">
                        <span class="icon-group">
                            <span class="menu-size icon-community"></span>
                            <i class="fas fa-flask small-icon"></i>
                        </span> Community
                    </span>
                </button>
                <button data-href="/merchant">
                    <span class="button-content">
                        <span class="icon-group">
                            <span class="menu-size icon-merchant"></span>
                            <i class="fas fa-flask small-icon"></i>
                        </span> Merchant
                    </span>
                </button>
                <button data-submenu="referralTests" data-section="referralTestsIntro">
                    <span class="button-content"><i class="fas fa-link"></i> Referral Tests</span>
                    <i class="fas fa-caret-right caret"></i>
                </button>
                <div id="referralTests" class="submenu">
                    <button data-section="page_visit_test">
                        <span class="button-content"><i class="fas fa-eye"></i> Page Visit Referral Test</span>
                    </button>
                    <button data-section="order_test">
                        <span class="button-content"><i class="fas fa-shopping-cart"></i> Order Referral Test</span>
                    </button>
                </div>
            </div>
            {% include 'account_menu.inc' with context %}
        </div>
    </div>
    <div class="content-wrapper">
        {% include 'welcome.inc' with context %}
        <div id="deal_listings" class="section" style="display: none;">
            <h2>Discounted Deal Listings</h2>
            <p>This section displays all currently active deal listings available across your affiliate programs.</p>
            <div style="display: flex; gap: 20px;">
                <div style="flex: 1; max-width: 300px;">
                    <h3>Categories</h3>
                    <div class="treeview" id="categoryTree"></div>
                </div>
                <div style="flex: 2;">
                    <table class="deals-table">
                        <thead>
                            <tr>
                                <th>Category</th>
                                <th>Title</th>
                                <th>URL</th>
                                <th>Price</th>
                                <th>Original</th>
                                <th>Discount %</th>
                                <th>Image</th>
                                <th>QTY</th>
                            </tr>
                        </thead>
                        <tbody id="dealList"></tbody>
                    </table>
                </div>
            </div>
        </div>
        <div id="affiliateProgramsIntro" class="section" style="display: none;">
            <h2>Affiliate Programs</h2>
            <p>Use this section to manage your affiliate program credentials.</p>
            <p>Select an affiliate program from the menu to enter or update your API keys, access tokens, or other necessary credentials.</p>
        </div>
        <div id="amazon_uk" class="section" style="display: none;">
            <div style="display: flex; align-items: center; margin-bottom: 10px;">
                <span class="icon-amazon-uk" style="width: 32px; height: 32px; margin-right: 10px;"></span>
                <h2>Amazon UK Credentials</h2>
            </div>
            <div class="form" style="margin: 0; max-width: 400px;">
                <label for="amazonAccessKey">Access Key:</label>
                <input type="text" id="amazonAccessKey" placeholder="Enter Access Key">
                <label for="amazonSecretKey">Secret Key:</label>
                <input type="text" id="amazonSecretKey" placeholder="Enter Secret Key">
                <label for="amazonAssociateTag">Associate Tag:</label>
                <input type="text" id="amazonAssociateTag" placeholder="Enter Associate Tag">
                <label for="amazonCountry">Country:</label>
                <input type="text" id="amazonCountry" placeholder="Enter Country (e.g., UK)">
                <button data-affiliate="amazon_uk">Update Credentials</button>
            </div>
            <div class="signup-instructions">
                <strong>Sign Up:</strong> Visit <a href="https://affiliate-program.amazon.com/" target="_blank">Amazon Associates</a>.
            </div>
        </div>
        <div id="ebay_uk" class="section" style="display: none;">
            <div style="display: flex; align-items: center; margin-bottom: 10px;">
                <span class="icon-ebay-uk" style="width: 32px; height: 32px; margin-right: 10px;"></span>
                <h2>eBay UK Credentials</h2>
            </div>
            <div class="form" style="margin: 0; max-width: 400px;">
                <label for="ebayAppId">App ID:</label>
                <input type="text" id="ebayAppId" placeholder="Enter App ID">
                <button data-affiliate="ebay_uk">Update Credentials</button>
            </div>
            <div class="signup-instructions">
                <strong>Sign Up:</strong> Go to <a href="https://partnernetwork.ebay.com/" target="_blank">eBay Partner Network</a>.
            </div>
        </div>
        <div id="awin" class="section" style="display: none;">
            <div style="display: flex; align-items: center; margin-bottom: 10px;">
                <i class="fas fa-network-wired" style="font-size: 32px; margin-right: 10px; color: white;"></i>
                <h2>Awin Credentials</h2>
            </div>
            <div class="form" style="margin: 0; max-width: 400px;">
                <label for="awinApiToken">API Token:</label>
                <input type="text" id="awinApiToken" placeholder="Enter API Token">
                <button data-affiliate="awin">Update Credentials</button>
            </div>
            <div class="signup-instructions">
                <strong>Sign Up:</strong> Visit <a href="https://www.awin.com/" target="_blank">Awin</a>.
            </div>
        </div>
        <div id="cj" class="section" style="display: none;">
            <div style="display: flex; align-items: center; margin-bottom: 10px;">
                <i class="fas fa-link" style="font-size: 32px; margin-right: 10px; color: white;"></i>
                <h2>CJ Credentials</h2>
            </div>
            <div class="form" style="margin: 0; max-width: 400px;">
                <label for="cjApiKey">API Key:</label>
                <input type="text" id="cjApiKey" placeholder="Enter API Key">
                <label for="cjWebsiteId">Website ID:</label>
                <input type="text" id="cjWebsiteId" placeholder="Enter Website ID">
                <button data-affiliate="cj">Update Credentials</button>
            </div>
            <div class="signup-instructions">
                <strong>Sign Up:</strong> Go to <a href="https://www.cj.com/" target="_blank">CJ Affiliate</a>.
            </div>
        </div>
        <div id="textmagic" class="section" style="display: none;">
            <div style="display: flex; align-items: center; margin-bottom: 10px;">
                <i class="fas fa-sms" style="font-size: 32px; margin-right: 10px; color: white;"></i>
                <h2>TextMagic Credentials</h2>
            </div>
            <div class="form" style="margin: 0; max-width: 400px;">
                <label for="textmagicUsername">Username:</label>
                <input type="text" id="textmagicUsername" placeholder="Enter Username">
                <label for="textmagicApiKey">API Key:</label>
                <input type="text" id="textmagicApiKey" placeholder="Enter API Key">
                <button data-affiliate="textmagic">Update Credentials</button>
            </div>
            <div class="signup-instructions">
                <strong>Sign Up:</strong> Visit <a href="https://www.textmagic.com/" target="_blank">TextMagic</a>.
            </div>
        </div>
        <div id="tiny" class="section" style="display: none;">
            <div style="display: flex; align-items: center; margin-bottom: 10px;">
                <i class="fas fa-pen" style="font-size: 32px; margin-right: 10px; color: white;"></i>
                <h2>tiny Credentials</h2>
            </div>
            <div class="form" style="margin: 0; max-width: 400px;">
                <label for="tinyApiKey">API Key:</label>
                <input type="text" id="tinyApiKey" placeholder="Enter API Key">
                <button data-affiliate="tiny">Update Credentials</button>
            </div>
            <div class="signup-instructions">
                <strong>Sign Up:</strong> Visit <a href="https://www.tiny.cloud/" target="_blank">tiny</a>.
            </div>
        </div>
        <div id="userManagementIntro" class="section" style="display: none;">
            <h2>User Management</h2>
            <p>This section allows you to manage different types of users in your system.</p>
            <p>Select a user type from the menu to view their details or modify their permissions:</p>
            <ul>
                <li><strong>Partners:</strong> Manage users with Partner permissions.</li>
                <li><strong>Communities:</strong> Manage community users.</li>
                <li><strong>Merchants:</strong> Manage merchant users.</li>
            </ul>
        </div>
        <div id="merchants" class="section" style="display: none;">
            <h2>Merchant Management</h2>
            <table>
                <thead>
                    <tr>
                        <th>USERid</th>
                        <th>Contact Name</th>
                        <th>Email</th>
                        <th>Phone Number</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="merchantsList">
                    <!-- Dynamically populated by updateUserTable -->
                </tbody>
            </table>
        </div>
        <div id="communities" class="section" style="display: none;">
            <h2>Communities Management</h2>
            <table>
                <thead>
                    <tr>
                        <th>USERid</th>
                        <th>Contact Name</th>
                        <th>Email</th>
                        <th>Phone Number</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="communitiesList">
                    <!-- Dynamically populated by updateUserTable -->
                </tbody>
            </table>
        </div>
        <div id="partners" class="section" style="display: none;">
            <h2>Partner Management</h2>
            <table>
                <thead>
                    <tr>
                        <th>USERid</th>
                        <th>Contact Name</th>
                        <th>Email</th>
                        <th>Phone Number</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="partnersList">
                    <!-- Dynamically populated by updateUserTable -->
                </tbody>
            </table>
        </div>
        <div id="testScriptsIntro" class="section" style="display: none;">
            <h2>Test Scripts</h2>
            <p>Use this section to test referral tracking and other scripts.</p>
            <p>Select an option from the menu to visit endpoints or run referral tests under "Referral Tests."</p>
        </div>
        <div id="referralTestsIntro" class="section" style="display: none;">
            <h2>Referral Tests</h2>
            <p>This section contains tools to test referral tracking functionality.</p>
            <p>Choose "Page Visit Referral Test" or "Order Referral Test" to submit test data and verify tracking behavior.</p>
        </div>
        <div id="page_visit_test" class="section" style="display: none;">
            <h2>Page Visit Referral Test</h2>
            <div class="form">
                <form id="pageVisitForm">
                    <table>
                        <tr>
                            <td><label for="pageReferer">Referer:</label></td>
                            <td><select id="pageReferer" name="referer"></select></td>
                        </tr>
                        <tr>
                            <td><label for="page">Page:</label></td>
                            <td><input type="text" id="page" name="page" value="/home"></td>
                        </tr>
                        <tr>
                            <td><label for="pageTimestamp">Timestamp:</label></td>
                            <td><input type="text" id="pageTimestamp" name="timestamp"></td>
                        </tr>
                        <tr>
                            <td colspan="2"><button type="submit">Submit Page Visit</button></td>
                        </tr>
                    </table>
                </form>
            </div>
        </div>
        <div id="order_test" class="section" style="display: none;">
            <h2>Order Referral Test</h2>
            <div class="form">
                <form id="orderForm">
                    <table>
                        <tr>
                            <td><label for="orderReferer">Referer:</label></td>
                            <td><select id="orderReferer" name="referer"></select></td>
                        </tr>
                        <tr>
                            <td><label for="orderId">Order ID:</label></td>
                            <td><input type="text" id="orderId" name="orderId" value="ORD12345"></td>
                        </tr>
                        <tr>
                            <td><label for="buyer">Buyer Name:</label></td>
                            <td><input type="text" id="buyer" name="buyer" value="John Doe"></td>
                        </tr>
                        <tr>
                            <td><label for="total">Total Amount (£):</label></td>
                            <td><input type="number" id="total" name="total" value="99.99" step="0.01"></td>
                        </tr>
                        <tr>
                            <td><label for="orderTimestamp">Timestamp:</label></td>
                            <td><input type="text" id="orderTimestamp" name="timestamp"></td>
                        </tr>
                        <tr>
                            <td colspan="2"><button type="submit">Submit Order</button></td>
                        </tr>
                    </table>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}